pipelline {
  agent any 
     environment {
        PATH = "/opt/maven/bin:$PATH"
 }
 stages {
   stage ("build") {
     steps {
       sh 'maven clean deploy'
     }
   }
   stage (sonarqube analysis) {
      environment {
        scaner Home = tool 'saidemy-sonar-scanner'
      } 
     steps {
       with sonarQubeEnv ('saidemy-sonarqube-server') {
         sh "${scannerHome}/bin/sonar-scanner"
      }
     }
    }
   }
}

